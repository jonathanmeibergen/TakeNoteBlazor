@using TakeNoteBlazor.Shared
@using TakeNoteBlazor.Client.ViewModels
<EditForm Model="@viewModel"
		  OnValidSubmit="@(async () => await FormSubmit.InvokeAsync(viewModel.IsNew))"
		  OnInvalidSubmit="InvalidCommitHandler">
	<DataAnnotationsValidator />
	<div class="form-group small">
		<div>
			<div>
				<label class="col-form-label-sm">Author :</label>
				<span class="form-text">@viewModel.Author</span>
			</div>
		</div>
		<div>
			<div>
				<label class="col-form-label-sm">Title :</label>
				<InputText @bind-Value="@viewModel.Title" />
				<ValidationMessage For="@(() => viewModel.Title)" />
			</div>
		</div>
		@if (viewModel.Note is not null)
		{
		<div>
			<div>
				<label class="col-form-label-sm">Content :</label>
				<InputTextArea @bind-Value="@viewModel.Note.Content" Rows="4" Cols="25"/>
				<ValidationMessage For="@(() => viewModel.Note.Content)" />
			</div>
		</div>
		}
		else if (viewModel.Question is not null)
		{
		}
		else if (viewModel.Card is not null)
		{
		}
		<button type="submit" class="btn-sm btn btn-success">
			@ButtonText
		</button>
	</div>
</EditForm>

@code {
	[Parameter] public FormViewModel viewModel { get; set; }
	[Parameter] public string ButtonText { get; set; }
	[Parameter] public EventCallback<bool> FormSubmit { get; set; }
	//[CascadingParameter]
	//public Object _Parent { get; set; }

	private void InvalidCommitHandler()
	{
		Console.WriteLine("invalid commit of post");
	}

	protected override Task OnParametersSetAsync()
	{
		return base.OnParametersSetAsync();
	}

}